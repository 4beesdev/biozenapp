# ========================
# PostgreSQL konekcija
# ========================
# Digital Ocean setuje DATABASE_URL u formatu: postgresql://user:pass@host:port/dbname
# DatabaseConfig.java će parsirati DATABASE_URL i konvertovati u jdbc format
# Ako DATABASE_URL nije setovan, koristi ove default vrednosti
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/biozenapp}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:biozen}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.datasource.driver-class-name=org.postgresql.Driver
# Ako je DATABASE_URL setovan, DatabaseConfig.java će override-ovati ove vrednosti

# Connection pool settings za production
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ========================
# JPA / Hibernate
# ========================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=true

# ========================
# (Opcionalno) CORS dev
# ========================
# Ako koristiš pune URL-ove iz frontenda (bez Vite proxy-a), uključi i CorsConfig klasu.
# Inace možeš koristiti Vite proxy i izbaciti ovaj deo.

# ========================
# JWT
# ========================
# Može se override-ovati sa environment variable APP_JWT_SECRET
app.jwt.secret=${APP_JWT_SECRET:change-this-secret-key-change-this-please-32chars-min}
# Može se override-ovati sa environment variable APP_JWT_TTLMILLIS
app.jwt.ttlMillis=${APP_JWT_TTLMILLIS:604800000}

# ========================
# Logging
# ========================
logging.level.org.springframework=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.springframework.boot.autoconfigure=INFO

# Health check
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized

# ========================
# Email Configuration
# ========================
spring.mail.host=mail.biozen.rs
spring.mail.port=587
spring.mail.username=no-reply@biozen.rs
spring.mail.password=${MAIL_PASSWORD:kr4vAzivazdrava}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
# SSL configuration - don't verify certificate strictly (temporary until DNS propagates)
spring.mail.properties.mail.smtp.ssl.trust=*
spring.mail.properties.mail.smtp.ssl.checkserveridentity=false
# Timeout settings to prevent long waits
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
app.mail.from=no-reply@biozen.rs
app.mail.from-name=BioZen Tracker
app.frontend.url=${FRONTEND_URL:https://app.biozen.rs}
